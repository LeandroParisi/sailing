(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"578a":function(e,s,r){"use strict";r.r(s);var t=function(){var e=this,s=e._self._c;e._self._setupProxy;return s("form",{staticClass:"signin-form",attrs:{method:"post",action:e.loginModel.SubmitUrl,novalidate:""}},[s("div",{staticClass:"auth-notification"},[e.errorMessage?s("div",{staticClass:"alert alert-danger alert-dismissible fade in"},[s("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(s){e.errorMessage=""}}},[s("span",{attrs:{"aria-hidden":"true"}},[e._v("Ã—")])]),e._v(" "+e._s(e.errorMessage)+" ")]):e._e()]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-label",attrs:{for:"email"}},[e._v("Student Email or School / Instructor User ID")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.loginModel.Email,expression:"loginModel.Email"}],staticClass:"form-control input-lg",attrs:{type:"text",name:"email",id:"email"},domProps:{value:e.loginModel.Email},on:{input:[function(s){s.target.composing||e.$set(e.loginModel,"Email",s.target.value)},e.onEmailChanged],keydown:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.onEnterEmail.apply(null,arguments)},keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.validateEmail.apply(null,arguments)}}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.emailExist,expression:"emailExist"}],staticClass:"forgot-password"},[s("a",{attrs:{href:e.loginModel.ForgotUrl}},[e._v("Forgot password?")])]),s("transition",{attrs:{name:"show"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.emailExist,expression:"emailExist"}],staticClass:"form-group"},[s("label",{staticClass:"form-label",attrs:{for:"password"}},[e._v("Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.loginModel.Password,expression:"loginModel.Password"}],ref:"password",staticClass:"form-control input-lg",attrs:{type:"password",name:"password",id:"password"},domProps:{value:e.loginModel.Password},on:{keydown:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.onEnterPassword.apply(null,arguments)},keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.login.apply(null,arguments)},input:function(s){s.target.composing||e.$set(e.loginModel,"Password",s.target.value)}}})])]),s("div",{staticClass:"form-group flex-group form-action"},[s("div",{staticClass:"form-check"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.loginModel.RememberMe,expression:"loginModel.RememberMe"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"remember_me",id:"remember-me"},domProps:{checked:Array.isArray(e.loginModel.RememberMe)?e._i(e.loginModel.RememberMe,null)>-1:e.loginModel.RememberMe},on:{change:function(s){var r=e.loginModel.RememberMe,t=s.target,a=!!t.checked;if(Array.isArray(r)){var o=null,i=e._i(r,o);t.checked?i<0&&e.$set(e.loginModel,"RememberMe",r.concat([o])):i>-1&&e.$set(e.loginModel,"RememberMe",r.slice(0,i).concat(r.slice(i+1)))}else e.$set(e.loginModel,"RememberMe",a)}}}),s("label",{staticClass:"form-check-label",attrs:{for:"remember-me"}},[e._v("Remember me")])]),e.emailExist||e.loginInProgress?e._e():s("button",{staticClass:"btn btn-blue btn-lg btn-login",attrs:{disabled:!e.loginModel.Email||e.emailCheckInProgress},on:{click:e.validateEmail}},[s("span",{class:{"btn-label-hide":e.emailCheckInProgress}},[e._v("Done")]),e.emailCheckInProgress?s("span",{staticClass:"spinner-wrapper"},[e._m(0)]):e._e()]),e.emailExist?s("button",{staticClass:"btn btn-blue btn-lg btn-login",attrs:{disabled:!e.loginModel.Password||e.loginInProgress},on:{click:e.login}},[s("span",{class:{"btn-label-hide":e.loginInProgress}},[e._v("Sign in")]),e.loginInProgress?s("span",{staticClass:"spinner-wrapper"},[e._m(1)]):e._e()]):e._e()]),s("input",{attrs:{type:"hidden",name:"signin",value:"1"}})],1)},a=[function(){var e=this,s=e._self._c;e._self._setupProxy;return s("span",{staticClass:"spinner-border-white",attrs:{role:"status"}},[s("span",{staticClass:"visually-hidden"},[e._v("Loading...")])])},function(){var e=this,s=e._self._c;e._self._setupProxy;return s("span",{staticClass:"spinner-border-white",attrs:{role:"status"}},[s("span",{staticClass:"visually-hidden"},[e._v("Loading...")])])}],o=r("9ab4"),i=r("1b40");class n{constructor(){this.Email="",this.Password="",this.RememberMe=!1,this.ForgotUrl="",this.SubmitUrl="",this.ServerError=""}}var l=r("bc3a"),d=r.n(l);class c{constructor(){this.baseUrl=window.location.origin}isUserExist(e){return d.a.get(`${this.baseUrl}/user/check_username?username=${encodeURIComponent(e)}`)}login(e,s,r){return d.a.post(`${this.baseUrl}/ajax/fast_signin?email=${encodeURIComponent(e)}&password=${encodeURIComponent(s)}&remember_me=${r}`)}}let m=class extends i["d"]{constructor(){super(...arguments),this.loginModel=new n,this.emailExist=!1,this.emailCheckInProgress=!1,this.errorMessage="",this.loginInProgress=!1}created(){this.params&&(this.loginModel=JSON.parse(this.params),this.errorMessage=this.loginModel.ServerError,this.loginModel.Email&&(this.emailExist=!0))}onEmailChanged(){this.emailExist=!1}onEnterEmail(e){e.preventDefault()}validateEmail(e){if(!this.loginInProgress&&!this.emailCheckInProgress&&(e&&e.preventDefault(),!this.emailCheckInProgress&&this.loginModel.Email)){this.emailCheckInProgress=!0,this.errorMessage="";const e=new c;e.isUserExist(this.loginModel.Email).then(e=>{e&&e.data&&e.data.error?(this.errorMessage=e.data.error,this.emailExist=!1):e&&e.data&&e.data.redirect?window.location.href=e.data.redirect:e&&e.data&&e.data.username_exists?(this.emailExist=!0,this.password.focus()):e&&e.data&&"undefined"!==typeof e.data.username_exists&&null!==e.data.username_exists?(this.emailExist=!1,this.errorMessage="The email address is not in our system. Perhaps you used a different email address to sign up. Perhaps you used your social network account. Contact us if you changed your email address and no longer have access to it. If you are a school or instructor, use your School/Instructor ID that you set up when you first joined."):(this.emailExist=!1,this.errorMessage="Sorry, we could not process your request now (server error). Please try again later or contact site administrator."),this.emailCheckInProgress=!1}).catch(e=>{console.error(e),this.emailExist=!1,this.errorMessage="Sorry, we could not process your request now (server error). Please try again later or contact site administrator.",this.emailCheckInProgress=!1})}}onEnterPassword(e){e.preventDefault()}login(e){if(!this.loginInProgress&&!this.emailCheckInProgress)if(e&&e.preventDefault(),this.loginModel.Email&&this.loginModel.Password){this.loginInProgress=!0,this.errorMessage="";const e=new c;e.login(this.loginModel.Email,this.loginModel.Password,this.loginModel.RememberMe).then(e=>{e&&e.data&&e.data.error?this.errorMessage=e.data.error:e&&e.data&&e.data.success?e.data.home_url?window.location.href=e.data.home_url:window.location.href=window.location.origin+"/my/start":this.errorMessage="Unknown error",this.loginInProgress=!1}).catch(e=>{console.error(e),this.errorMessage=e,this.loginInProgress=!1})}else this.errorMessage="Email and password can't be empty"}};Object(o["a"])([Object(i["b"])()],m.prototype,"params",void 0),Object(o["a"])([Object(i["c"])()],m.prototype,"password",void 0),m=Object(o["a"])([i["a"]],m);var u=m,g=u,h=r("0c7c"),p=Object(h["a"])(g,t,a,!1,null,null,null);s["default"]=p.exports}}]);
//# sourceMappingURL=login.js.map